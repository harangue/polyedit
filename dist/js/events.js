(function() {
  var events, path;

  path = require('path');

  events = function(main) {
    var ctrlCheck, isCtrl, wheelCheck;
    $(function() {
      $(".import-dir").click(function() {
        return $(this).children('.handler').off('change').on('change', function() {
          var files;
          files = $(this)[0].files;
          if (files.length !== 0) {
            main.unsaved = true;
            main.importDirectory(files[0].path);
          }
          return $(this).val('');
        }).click(function(e) {
          return e.stopPropagation();
        }).trigger('click');
      });
      $(".import-file").click(function() {
        return $(this).children('.handler').off('change').on('change', function() {
          var file, files, i, len;
          files = $(this)[0].files;
          for (i = 0, len = files.length; i < len; i++) {
            file = files[i];
            main.unsaved = true;
            main.importFile(file.path);
          }
          return $(this).val('');
        }).click(function(e) {
          return e.stopPropagation();
        }).attr('accept', main.supportedFiles.join(',')).trigger('click');
      });
      $(".export-file").click(function() {
        var fileName, ref;
        $(".do-trigger-export").remove();
        console.log(main.data.file);
        if (((ref = main.data) != null ? ref.file : void 0) != null) {
          fileName = path.parse(main.data.file).name;
        } else {
          fileName = "";
        }
        $("body").append("<input class='do-trigger-export' type='file' nwsaveas='" + fileName + ".json' accept='.json'>");
        $('.do-trigger-export:file').change(function() {
          var files;
          files = $(this)[0].files;
          if (files.length > 0) {
            return main["export"](files[0].path);
          }
        });
        return $('.do-trigger-export').trigger('click');
      });
      $(".new-project").click(function() {
        return main.newProject();
      });
      $(".open-project").click(function() {
        return $(this).children('.handler').off('change').on('change', function() {
          var files;
          files = $(this)[0].files;
          if (files.length !== 0) {
            main.open(files[0].path);
          }
          return $(this).val('');
        }).click(function(e) {
          return e.stopPropagation();
        }).trigger('click');
      });
      $(".save-project").click(function() {
        if (main.data.file) {
          return main.save();
        } else {
          $(".do-trigger-save").remove();
          $("body").append('<input class="do-trigger-save" type="file" nwsaveas accept=".plyed">');
          $('.do-trigger-save:file').change(function() {
            var files;
            files = $(this)[0].files;
            if (files.length > 0) {
              return main.save(files[0].path);
            }
          });
          return $('.do-trigger-save').trigger('click');
        }
      });
      $('.search-box').bind("propertychange change click keyup input paste", function(e) {
        $(".sprite-listing").hide();
        return $(".sprite-listing:contains('" + ($(this).val()) + "')").show();
      });
      $("body").on('click', '.sprite-listing', function() {
        return main.setEditor($(this).attr('data-id'));
      });
      $(".exporter-box").change(function() {
        var ref, ref1;
        if ((ref = main.data) != null) {
          if ((ref1 = ref.settings) != null) {
            ref1.exporter = $(this).val();
          }
        }
        return main.unsaved = true;
      });
      $(".active-box").on('change', function() {
        if ($(this).is(':checked')) {
          return $(".sprite-listing:not(.activeSprite)").hide();
        } else {
          return $(".sprite-listing").show();
        }
      });
      $(".zoom-box").change(function() {
        return main.ui.setZoom($(".zoom-box").val());
      });
      return $(".polygon-button").click(function() {
        var polygon;
        main.unsaved = true;
        return polygon = main.ui.editor.newPolygon();
      });
    });
    interact('.left').resizable({
      edges: {
        right: true
      }
    }).on('resizemove', function(event) {
      event.preventDefault();
      $(".left").width(Math.min(Math.max(235, event.rect.width), 400));
      return $("#editor").width($(".bottom").width() - $(".left").width() - $("#properties").width() - 2);
    }).on('resizeend', function() {
      var ref, ref1;
      if ((ref = main.data) != null) {
        if ((ref1 = ref.settings) != null) {
          ref1.leftWidth = $(".left").width();
        }
      }
      return console.log(main);
    });
    interact('#properties').resizable({
      edges: {
        left: true
      }
    }).on('resizemove', function(event) {
      $("#properties").width(Math.min(Math.max(200, event.rect.width), 400));
      return $("#editor").width($(".bottom").width() - $(".left").width() - $("#properties").width() - 2);
    }).on('resizeend', function() {
      var ref, ref1;
      if ((ref = main.data) != null) {
        if ((ref1 = ref.settings) != null) {
          ref1.rightWidth = $("#properties").width();
        }
      }
      return console.log(main.data.settings, $("#properties").width());
    });
    Mousetrap.bind('ctrl+shift+i', function() {
      return gui.Window.get().showDevTools();
    });
    $("body").keydown(function(e) {
      if (e.keycode === 8) {
        return e.preventDefault();
      }
    });
    isCtrl = false;
    ctrlCheck = function(e) {
      if (e.which === 17) {
        return isCtrl = e.type === 'keydown' ? true : false;
      }
    };
    wheelCheck = function(e, delta) {
      var originalZoom;
      if (isCtrl) {
        originalZoom = parseInt($(".zoom-box").val());
        $(".zoom-box").val(Math.max(Math.min(originalZoom + delta * 25, 1000), 25));
        return main.ui.setZoom($(".zoom-box").val());
      }
    };
    return $("body").keydown(ctrlCheck).keyup(ctrlCheck).mousewheel(wheelCheck);
  };

  module.exports = events;

}).call(this);

//# sourceMappingURL=data:application/json;base64,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QUM1QixHQUFHLENBQUMsTUFBTSxDQUFDLEdBQVgsQ0FBQSxDQUFnQixDQUFDLFlBQWpCLENBQUE7SUFENEIsQ0FBL0I7SUFHQSxDQUFBLENBQUUsTUFBRixDQUFTLENBQUMsT0FBVixDQUFrQixTQUFDLENBQUQ7TUFDZixJQUFHLENBQUMsQ0FBQyxPQUFGLEtBQWEsQ0FBaEI7ZUFDRyxDQUFDLENBQUMsY0FBRixDQUFBLEVBREg7O0lBRGUsQ0FBbEI7SUFPQSxNQUFBLEdBQVM7SUFFVCxTQUFBLEdBQVksU0FBQyxDQUFEO01BQ1QsSUFBRyxDQUFDLENBQUMsS0FBRixLQUFXLEVBQWQ7ZUFDRyxNQUFBLEdBQVksQ0FBQyxDQUFDLElBQUYsS0FBVSxTQUFiLEdBQTRCLElBQTVCLEdBQXNDLE1BRGxEOztJQURTO0lBR1osVUFBQSxHQUFhLFNBQUMsQ0FBRCxFQUFJLEtBQUo7QUFDVixVQUFBO01BQUEsSUFBRyxNQUFIO1FBQ0csWUFBQSxHQUFlLFFBQUEsQ0FBUyxDQUFBLENBQUUsV0FBRixDQUFjLENBQUMsR0FBZixDQUFBLENBQVQ7UUFDZixDQUFBLENBQUUsV0FBRixDQUFjLENBQUMsR0FBZixDQUFvQixJQUFJLENBQUMsR0FBTCxDQUFVLElBQUksQ0FBQyxHQUFMLENBQVMsWUFBQSxHQUFlLEtBQUEsR0FBTSxFQUE5QixFQUFpQyxJQUFqQyxDQUFWLEVBQWtELEVBQWxELENBQXBCO2VBQ0EsSUFBSSxDQUFDLEVBQUUsQ0FBQyxPQUFSLENBQWdCLENBQUEsQ0FBRSxXQUFGLENBQWMsQ0FBQyxHQUFmLENBQUEsQ0FBaEIsRUFISDs7SUFEVTtXQU1iLENBQUEsQ0FBRSxNQUFGLENBQ0csQ0FBQyxPQURKLENBQ1ksU0FEWixDQUVHLENBQUMsS0FGSixDQUVVLFNBRlYsQ0FHRyxDQUFDLFVBSEosQ0FHZSxVQUhmO0VBakpHOztFQXNKVCxNQUFNLENBQUMsT0FBUCxHQUFpQjtBQXhKakIiLCJmaWxlIjoiZXZlbnRzLmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIiwic291cmNlc0NvbnRlbnQiOlsicGF0aCA9IHJlcXVpcmUgJ3BhdGgnXG5cbmV2ZW50cyA9IChtYWluKSAtPlxuICAgJCAtPlxuICAgICAgIyBNZW51IGJhciBoYW5kbGluZ1xuICAgICAgJChcIi5pbXBvcnQtZGlyXCIpLmNsaWNrIC0+XG4gICAgICAgICAkKHRoaXMpLmNoaWxkcmVuICcuaGFuZGxlcidcbiAgICAgICAgICAgIC5vZmYgJ2NoYW5nZSdcbiAgICAgICAgICAgIC5vbiAnY2hhbmdlJywgLT5cbiAgICAgICAgICAgICAgIGZpbGVzID0gJCh0aGlzKVswXS5maWxlc1xuICAgICAgICAgICAgICAgaWYgZmlsZXMubGVuZ3RoIGlzbnQgMFxuICAgICAgICAgICAgICAgICAgbWFpbi51bnNhdmVkID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgbWFpbi5pbXBvcnREaXJlY3RvcnkoIGZpbGVzWzBdLnBhdGggKVxuICAgICAgICAgICAgICAgJCh0aGlzKS52YWwoJycpXG4gICAgICAgICAgICAuY2xpY2sgKGUpIC0+XG4gICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAgICAgICAudHJpZ2dlciAnY2xpY2snXG5cbiAgICAgICQoXCIuaW1wb3J0LWZpbGVcIikuY2xpY2sgLT5cbiAgICAgICAgICQodGhpcykuY2hpbGRyZW4gJy5oYW5kbGVyJ1xuICAgICAgICAgICAgLm9mZiAnY2hhbmdlJ1xuICAgICAgICAgICAgLm9uICdjaGFuZ2UnLCAtPlxuICAgICAgICAgICAgICAgZmlsZXMgPSAkKHRoaXMpWzBdLmZpbGVzXG4gICAgICAgICAgICAgICBmb3IgZmlsZSBpbiBmaWxlc1xuICAgICAgICAgICAgICAgICAgbWFpbi51bnNhdmVkID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgbWFpbi5pbXBvcnRGaWxlKCBmaWxlLnBhdGggKVxuICAgICAgICAgICAgICAgJCh0aGlzKS52YWwoJycpXG4gICAgICAgICAgICAuY2xpY2sgKGUpIC0+XG4gICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAgICAgICAuYXR0ciAnYWNjZXB0JywgbWFpbi5zdXBwb3J0ZWRGaWxlcy5qb2luKCcsJylcbiAgICAgICAgICAgIC50cmlnZ2VyICdjbGljaydcblxuICAgICAgJChcIi5leHBvcnQtZmlsZVwiKS5jbGljayAtPlxuICAgICAgICAgJChcIi5kby10cmlnZ2VyLWV4cG9ydFwiKS5yZW1vdmUoKVxuICAgICAgICAgY29uc29sZS5sb2cgbWFpbi5kYXRhLmZpbGVcbiAgICAgICAgIGlmIG1haW4uZGF0YT8uZmlsZT9cbiAgICAgICAgICAgIGZpbGVOYW1lID0gcGF0aC5wYXJzZShtYWluLmRhdGEuZmlsZSkubmFtZVxuICAgICAgICAgZWxzZVxuICAgICAgICAgICAgZmlsZU5hbWUgPSBcIlwiXG4gICAgICAgICAkKFwiYm9keVwiKS5hcHBlbmQoXCI8aW5wdXQgY2xhc3M9J2RvLXRyaWdnZXItZXhwb3J0JyB0eXBlPSdmaWxlJyBud3NhdmVhcz0nI3tmaWxlTmFtZX0uanNvbicgYWNjZXB0PScuanNvbic+XCIpO1xuICAgICAgICAgJCgnLmRvLXRyaWdnZXItZXhwb3J0OmZpbGUnKS5jaGFuZ2UgLT5cbiAgICAgICAgICAgIGZpbGVzID0gJCh0aGlzKVswXS5maWxlc1xuICAgICAgICAgICAgaWYgZmlsZXMubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgbWFpbi5leHBvcnQoZmlsZXNbMF0ucGF0aClcbiAgICAgICAgICQoJy5kby10cmlnZ2VyLWV4cG9ydCcpLnRyaWdnZXIoJ2NsaWNrJylcblxuICAgICAgJChcIi5uZXctcHJvamVjdFwiKS5jbGljayAtPlxuICAgICAgICAgbWFpbi5uZXdQcm9qZWN0KClcblxuICAgICAgJChcIi5vcGVuLXByb2plY3RcIikuY2xpY2sgLT5cbiAgICAgICAgICQodGhpcykuY2hpbGRyZW4gJy5oYW5kbGVyJ1xuICAgICAgICAgICAgLm9mZiAnY2hhbmdlJ1xuICAgICAgICAgICAgLm9uICdjaGFuZ2UnLCAtPlxuICAgICAgICAgICAgICAgZmlsZXMgPSAkKHRoaXMpWzBdLmZpbGVzXG4gICAgICAgICAgICAgICBpZiBmaWxlcy5sZW5ndGggaXNudCAwXG4gICAgICAgICAgICAgICAgICBtYWluLm9wZW4oIGZpbGVzWzBdLnBhdGggKVxuICAgICAgICAgICAgICAgJCh0aGlzKS52YWwoJycpXG4gICAgICAgICAgICAuY2xpY2sgKGUpIC0+XG4gICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAgICAgICAudHJpZ2dlciAnY2xpY2snXG5cbiAgICAgICQoXCIuc2F2ZS1wcm9qZWN0XCIpLmNsaWNrIC0+XG4gICAgICAgICBpZiBtYWluLmRhdGEuZmlsZVxuICAgICAgICAgICAgbWFpbi5zYXZlKClcbiAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICQoXCIuZG8tdHJpZ2dlci1zYXZlXCIpLnJlbW92ZSgpXG4gICAgICAgICAgICAkKFwiYm9keVwiKS5hcHBlbmQoJzxpbnB1dCBjbGFzcz1cImRvLXRyaWdnZXItc2F2ZVwiIHR5cGU9XCJmaWxlXCIgbndzYXZlYXMgYWNjZXB0PVwiLnBseWVkXCI+Jyk7XG4gICAgICAgICAgICAkKCcuZG8tdHJpZ2dlci1zYXZlOmZpbGUnKS5jaGFuZ2UgLT5cbiAgICAgICAgICAgICAgIGZpbGVzID0gJCh0aGlzKVswXS5maWxlc1xuICAgICAgICAgICAgICAgaWYgZmlsZXMubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgbWFpbi5zYXZlKGZpbGVzWzBdLnBhdGgpXG4gICAgICAgICAgICAkKCcuZG8tdHJpZ2dlci1zYXZlJykudHJpZ2dlcignY2xpY2snKVxuXG4gICAgICAjIFNwcml0ZXMgcGFuZSBoYW5kbGluZ1xuICAgICAgJCgnLnNlYXJjaC1ib3gnKS5iaW5kIFwicHJvcGVydHljaGFuZ2UgY2hhbmdlIGNsaWNrIGtleXVwIGlucHV0IHBhc3RlXCIsIChlKSAtPlxuICAgICAgICAgJChcIi5zcHJpdGUtbGlzdGluZ1wiKS5oaWRlKClcbiAgICAgICAgICQoXCIuc3ByaXRlLWxpc3Rpbmc6Y29udGFpbnMoJyN7JCh0aGlzKS52YWwoKX0nKVwiKS5zaG93KClcblxuICAgICAgJChcImJvZHlcIikub24gJ2NsaWNrJywgJy5zcHJpdGUtbGlzdGluZycsICgpIC0+XG4gICAgICAgICBtYWluLnNldEVkaXRvciAkKHRoaXMpLmF0dHIoJ2RhdGEtaWQnKVxuXG4gICAgICAkKFwiLmV4cG9ydGVyLWJveFwiKS5jaGFuZ2UgLT5cbiAgICAgICAgIG1haW4uZGF0YT8uc2V0dGluZ3M/LmV4cG9ydGVyID0gJCh0aGlzKS52YWwoKVxuICAgICAgICAgbWFpbi51bnNhdmVkID0gdHJ1ZVxuXG4gICAgICAkKFwiLmFjdGl2ZS1ib3hcIikub24gJ2NoYW5nZScsIC0+XG4gICAgICAgICBpZiAkKHRoaXMpLmlzKCc6Y2hlY2tlZCcpXG4gICAgICAgICAgICAkKFwiLnNwcml0ZS1saXN0aW5nOm5vdCguYWN0aXZlU3ByaXRlKVwiKS5oaWRlKClcbiAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICQoXCIuc3ByaXRlLWxpc3RpbmdcIikuc2hvdygpXG5cbiAgICAgICMgRWRpdG9yIGhhbmRsaW5nXG4gICAgICAkKFwiLnpvb20tYm94XCIpLmNoYW5nZSAtPlxuICAgICAgICAgbWFpbi51aS5zZXRab29tKCQoXCIuem9vbS1ib3hcIikudmFsKCkpXG5cbiAgICAgICQoXCIucG9seWdvbi1idXR0b25cIikuY2xpY2sgLT5cbiAgICAgICAgIG1haW4udW5zYXZlZCA9IHRydWVcbiAgICAgICAgIHBvbHlnb24gPSBtYWluLnVpLmVkaXRvci5uZXdQb2x5Z29uKClcblxuICAgICAgIyBJbnRlcmFjdCBEcmFnZ2FibGUgU3R1ZmZcbiAgIFx0aW50ZXJhY3QoJy5sZWZ0JylcbiAgIFx0XHQucmVzaXphYmxlIHtcbiAgIFx0XHRcdGVkZ2VzOiB7IHJpZ2h0OiB0cnVlIH1cbiAgIFx0XHR9XG4gICAgICBcdFx0Lm9uICdyZXNpemVtb3ZlJywgKGV2ZW50KSAtPlxuICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgJChcIi5sZWZ0XCIpLndpZHRoKE1hdGgubWluKCBNYXRoLm1heCgyMzUsZXZlbnQucmVjdC53aWR0aCksIDQwMCkpXG4gICAgICAgICAgICAgICAkKFwiI2VkaXRvclwiKS53aWR0aCgkKFwiLmJvdHRvbVwiKS53aWR0aCgpIC0gJChcIi5sZWZ0XCIpLndpZHRoKCkgLSAkKFwiI3Byb3BlcnRpZXNcIikud2lkdGgoKSAtIDIpXG5cbiAgICAgICAgICAgIC5vbiAncmVzaXplZW5kJywgLT5cbiAgICAgICAgICAgICAgIG1haW4uZGF0YT8uc2V0dGluZ3M/LmxlZnRXaWR0aCA9ICQoXCIubGVmdFwiKS53aWR0aCgpXG4gICAgICAgICAgICAgICBjb25zb2xlLmxvZyBtYWluXG5cbiAgIFx0aW50ZXJhY3QoJyNwcm9wZXJ0aWVzJylcbiAgIFx0XHQucmVzaXphYmxlIHtcbiAgIFx0XHRcdGVkZ2VzOiB7IGxlZnQ6IHRydWUgfVxuICAgXHRcdH1cbiAgICAgIFx0XHQub24gJ3Jlc2l6ZW1vdmUnLCAoZXZlbnQpIC0+XG4gICAgICAgICAgICAgICAkKFwiI3Byb3BlcnRpZXNcIikud2lkdGgoTWF0aC5taW4oIE1hdGgubWF4KDIwMCxldmVudC5yZWN0LndpZHRoKSwgNDAwKSlcbiAgICAgICAgICAgICAgICQoXCIjZWRpdG9yXCIpLndpZHRoKCQoXCIuYm90dG9tXCIpLndpZHRoKCkgLSAkKFwiLmxlZnRcIikud2lkdGgoKSAtICQoXCIjcHJvcGVydGllc1wiKS53aWR0aCgpIC0gMilcblxuICAgICAgICAgICAgLm9uICdyZXNpemVlbmQnLCAtPlxuICAgICAgICAgICAgICAgbWFpbi5kYXRhPy5zZXR0aW5ncz8ucmlnaHRXaWR0aCA9ICQoXCIjcHJvcGVydGllc1wiKS53aWR0aCgpXG4gICAgICAgICAgICAgICBjb25zb2xlLmxvZyBtYWluLmRhdGEuc2V0dGluZ3MsICQoXCIjcHJvcGVydGllc1wiKS53aWR0aCgpXG5cbiAgICAgICMgSG90a2V5IFN0dWZmXG4gICAgICBNb3VzZXRyYXAuYmluZCAnY3RybCtzaGlmdCtpJywgLT5cbiAgICAgICAgIGd1aS5XaW5kb3cuZ2V0KCkuc2hvd0RldlRvb2xzKClcblxuICAgICAgJChcImJvZHlcIikua2V5ZG93biAoZSkgLT5cbiAgICAgICAgIGlmIGUua2V5Y29kZSBpcyA4XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcblxuXG4gICAgICAjIEhhbmRsaW5nIGN0cmwtc2Nyb2xsXG5cbiAgICAgIGlzQ3RybCA9IGZhbHNlXG5cbiAgICAgIGN0cmxDaGVjayA9IChlKSAtPlxuICAgICAgICAgaWYgZS53aGljaCBpcyAxN1xuICAgICAgICAgICAgaXNDdHJsID0gaWYgZS50eXBlIGlzICdrZXlkb3duJyB0aGVuIHRydWUgZWxzZSBmYWxzZVxuICAgICAgd2hlZWxDaGVjayA9IChlLCBkZWx0YSkgLT5cbiAgICAgICAgIGlmIGlzQ3RybFxuICAgICAgICAgICAgb3JpZ2luYWxab29tID0gcGFyc2VJbnQoJChcIi56b29tLWJveFwiKS52YWwoKSlcbiAgICAgICAgICAgICQoXCIuem9vbS1ib3hcIikudmFsKCBNYXRoLm1heCggTWF0aC5taW4ob3JpZ2luYWxab29tICsgZGVsdGEqMjUsMTAwMCksIDI1KSApXG4gICAgICAgICAgICBtYWluLnVpLnNldFpvb20oJChcIi56b29tLWJveFwiKS52YWwoKSlcblxuICAgICAgJChcImJvZHlcIilcbiAgICAgICAgIC5rZXlkb3duIGN0cmxDaGVja1xuICAgICAgICAgLmtleXVwIGN0cmxDaGVja1xuICAgICAgICAgLm1vdXNld2hlZWwgd2hlZWxDaGVja1xuXG5tb2R1bGUuZXhwb3J0cyA9IGV2ZW50c1xuIl19